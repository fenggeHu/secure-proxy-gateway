server:
  port: 8000
  host: "0.0.0.0"
  admin_host: "127.0.0.1"

proxy:
  timeout:
    connect: 5.0
    read: 30.0
    write: 30.0
  max_response_size: 10485760
  strip_headers:
    - "Host"
    - "Connection"
    - "Transfer-Encoding"
    - "Upgrade"
    - "Proxy-Connection"
    - "Proxy-Authenticate"
    - "Proxy-Authorization"

routes:
  - name: "user-service"
    path: "/api/docs"
    target: "http://localhost:8000/docs#"
    method: "*"
    description: "用户服务代理"
    request_rules:
      add_headers:
        X-Proxy-Source: "secure-gateway"
      add_params:
        _from: "proxy"
      del_params:
        - "debug"
    response_rules:
      mask_regex:
        - pattern: "(\\d{3})\\d{4}(\\d{4})"
          replacement: "\\1****\\2"
        - pattern: "(\\d{6})\\d{8}(\\d{4})"
          replacement: "\\1********\\2"

  - name: "order-service"
    path: "/api/orders"
    target: "https://internal-order-service.local"
    method: "GET"
    description: "订单查询（只读）"
